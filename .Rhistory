log1 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 2")
log1 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 2/access.log")
View(log1)
log1 <- readLines("/Users/nicolinehoffmannvoghjensen/Downloads/log 2/access.log")
print(log1)
log_records <- split(log_lines, ceiling(seq_along(log_lines) / 8))
log_records <- split(log1, ceiling(seq_along(log1) / 8))
View(log_records)
log1 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 2/access.log")
View(log1)
colnames(log1)
colnames(logs_df) <- c("IP", "Ident", "User", "Time", "Request", "Status", "Bytes", "Referrer", "UserAgent")
colnames(log1) <- c("IP", "Ident", "User", "Time", "Request", "Status", "Bytes", "Referrer", "UserAgent")
colnames(log1) <- c("IP", "X", "X", "Time", "X", "X", "X", "X", "X")
colnames(log1) <- c("IP", "X", "X", "Time", "Request", "Status", "Bytes", "X", "Useragent")
log0 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 2/access.log")
log1 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 2/access.log.1")
View(log1)
log2 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 2/access.log.2")
View(log2)
View(log1)
View(log2)
View(log2)
log2.2 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 2/access.log.2.2")
log2.2 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 2/access.log.2 2")
View(log2.2)
# Find alle logfiler i mappen
log_files <- list.files(path = "/Users/nicolinehoffmannvoghjensen/Downloads/",
pattern = "log", full.names = TRUE)
# Tjek listen over fundne filer
print(log_files)
logggg <- as.data.frame(log_files)
View(logggg)
log3 <-  read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.3")
View(log3)
# Manuelt oprettet liste over filer
log_files <- c(
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.1",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.2",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.2 2",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.3",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.4",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.5",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.6",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.7",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.8",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.9",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.10",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.11",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.12",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.13",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.14"
)
# Læs og kombiner alle filer
log_data <- do.call(rbind, lapply(log_files, function(file) {
read.table(file, header = FALSE, sep = " ", fill = TRUE, quote = "")
}))
# Manuelt oprettet liste over filer
log_files <- c(
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.1",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.2",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.2 2",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.3",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.4",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.5",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.6",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.7",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.8",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.9",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.10",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.11",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.12",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.13",
"/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.14"
)
log0 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log")
log1 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.1")
log2 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.2")
log2_2 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.2 2")
log3 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.3")
log4 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.4")
log5 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.5")
log6 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.6")
log7 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.7")
log8 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.8")
log9 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.9")
log10 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.10")
log11 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.11")
log12 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.12")
log13 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.13")
log14 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.14")
log0 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log")
log1 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.1")
log2 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.2")
log2_2 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.2 2")
log3 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.3")
log4 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.4")
log5 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.5")
log6 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.6")
log7 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.7")
log8 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.8")
log9 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.9")
log10 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.10")
log11 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.11")
log12 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.12")
log13 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.13")
log14 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.14")
log_list <- list(log0, log1, log2, log2_2, log3, log4, log5, log6, log7, log8, log9, log10, log11, log12, log13, log14)
combinedlogs <- do.call(rbind, log_list)
View(combinedlogs)
is.any.na(combinedlogs)
# Tilføj den kombinerede "Time"-kolonne med cbind()
combined_logs <- cbind(combined_logs, Time = paste(combined_logs$V4, combined_logs$V5))
combinedlogs <- cbind(combined_logs, Time = paste(combined_logs$V4, combined_logs$V5))
View(combinedlogs)
View(log0)
View(combinedlogs)
colnames(combinedlogs) <- c("IP", "X", "X", "Time", "Tid", "Request", "Status", "Bytes", "Useragent")
colnames(combinedlogs) <- c("IP", "X", "X", "Time", "Tid", "Request", "Status", "Bytes","X" "Useragent")
colnames(combinedlogs) <- c("IP", "X", "X", "Time", "Tid", "Request", "Status", "Bytes", "X" "Useragent")
View(log11)
combinedlogs$time <- sub("^(\\[\\d+/\\w+/\\d+):.*", "\\1", combinedlogs$time)
colnames(combinedlogs) <- c("IP", "Identity", "User", "Time", "Tid", "Request", "Status", "Bytes", "HTTP referrer" "Useragent")
colnames(combinedlogs) <- c("IP", "Identity", "User", "Time", "Tid", "Request", "Status", "Bytes", "HTTP referrer","Useragent")
colnames(combinedlogs) <- c("IP", "Identity", "User", "Time", "Timezone", "Request", "Status", "Bytes", "HTTP referrer","Useragent")
df$Date <- sub("\\[(\\d+/\\w+/\\d+):.*", "\\1", combinedlogs$Time)
View(df)
datadf$Date <- sub("\\[(\\d+/\\w+/\\d+):.*", "\\1", combinedlogs$Time)
combinedlogs$Date <- sub("\\[(\\d+/\\w+/\\d+):.*", "\\1", combinedlogs$Time)
ip_counts <- as.data.frame(table(combinedlogs$IP, combinedlogs$Date))
View(ip_counts)
ipcounts <- as.data.frame(table(combinedlogs$IP, combinedlogs$Date))
colnames(ipcounts) <- c("IP", "Date", "Requests")
View(ipcounts)
ipcounts <- ipcounts[order(-ipcounts$Requests), ]
###Opgave 3 OLA 4
#I skal åbne logfilerne og lave en rapport over aktiviteten på webserveren.Rapporten skal indeholde en optælling af aktive ip-adresser pr døgn. Plot med de mest aktive. whois-info på den mest aktive. Gruppering på 404, herunder en beskrivelse af ”mistænksomme”requests.Det værste der kan ske, er at en mistænksom request returnerer 200. Overvej hvordan man kanfange dem.
#Indhentning af accesslogs
log0 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log")
log1 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.1")
log2 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.2")
log2_2 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.2 2")
log3 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.3")
log4 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.4")
log5 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.5")
log6 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.6")
log7 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.7")
log8 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.8")
log9 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.9")
log10 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.10")
log11 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.11")
log12 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.12")
log13 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.13")
log14 <- read.table("/Users/nicolinehoffmannvoghjensen/Downloads/log 4/access.log.14")
#Liste over samlede logs
log_list <- list(log0, log1, log2, log2_2, log3, log4, log5, log6, log7, log8, log9, log10, log11, log12, log13, log14)
#Omdanner listen af logs til dataframe
combinedlogs <- do.call(rbind, log_list)
#Kolonnenavne til df
colnames(combinedlogs) <- c("IP", "Identity", "User", "Time", "Timezone", "Request", "Status", "Bytes", "HTTP referrer","Useragent")
###Optælling af aktive IP-adresser pr. døgn
#Regex til at finde dato - Matcher formatet [dd/mmm/yyyy:hh:mm:ss] og beholder kun dd/mmm/yyyy
combinedlogs$Date <- sub("\\[(\\d+/\\w+/\\d+):.*", "\\1", combinedlogs$Time)
#Tabel over IP adresser og datoer
ipcounts <- as.data.frame(table(combinedlogs$IP, combinedlogs$Date))
#Omdøber kolonner
colnames(ipcounts) <- c("IP", "Date", "Requests")
daily_active_ips <- aggregate(IP ~ Date, data = ipcounts, FUN = length)
View(daily_active_ips)
# Tæl unikke IP'er pr. dato
daily_active_ips <- aggregate(IP ~ Date, data = combinedlogs, FUN = function(x) length(unique(x)))
# Omdøb kolonnerne
colnames(daily_active_ips) <- c("Date", "Unique_IPs")
# Se resultatet
print(daily_active_ips)
str(combinedlogs)
aktivip <- aggregate(IP ~ Date, data = combinedlogs, FUN = function(x) length(unique(x)))
colnames(aktivip) <- c("Date", "IP")
View(aktivip)
# Filtrer data for en specifik dato, f.eks. "09/Nov/2023"
specific_date <- "09/Nov/2023"
filtered_data <- combinedlogs[combinedlogs$Date == specific_date, ]
# Tæl unikke IP'er for den dato
unique_ips <- unique(filtered_data$IP)
num_unique_ips <- length(unique_ips)
# Print resultatet
print(paste("Antallet af unikke IP'er for", specific_date, "er:", num_unique_ips))
# Tjek for dubletter
duplicates <- combinedlogs[duplicated(combinedlogs), ]
print(paste("Antal dubletter:", nrow(duplicates)))
duplicates <- combinedlogs[duplicated(combinedlogs), ]
# Antal dubletter
print(nrow(duplicates))
duplicates <- combinedlogs[duplicated(combinedlogs), ]
print(paste("Antal dubletter:", nrow(duplicates)))
print(duplicates)
print(paste("Antallet af unikke IP'er for", specific_date, "er:", num_unique_ips))
